# ============================================================================
# IoT Application - Smart Building Monitoring (8 components)
# Based on: Xia, Etchevers, Letondeur, Coupaye, Desprez
#   "Combining hardware nodes and software components ordering-based
#    heuristics for optimizing the placement of distributed IoT
#    applications in the fog", SAC 2018, pp. 751-760
# Application structure from: Brogi, Forti, "QoS-aware Deployment of
#   IoT Applications Through the Fog", IEEE IoT Journal, 4(5), 2017
# Energy scenario from: Mahmud, Srirama, Ramamohanarao, Buyya,
#   "Quality of Experience (QoE)-aware placement of applications in
#    Fog computing environments", JPDC, vol. 132, 2019
#
# DAG structure (smart building monitoring pipeline):
#
#   C0 (Sensor Gateway)   -- edge, collects raw IoT data
#    |
#   C1 (Data Filter)      -- filters noise, reduces volume
#    |
#   C2 (Preprocessor)     -- normalization, feature extraction
#   / \
#  C3   C4                -- parallel processing branches
#  (Thermal   (Security
#   Analysis)  Analysis)
#   \  /
#   C5 (Aggregator)       -- merges analysis results
#    |
#   C6 (Dashboard)        -- real-time visualization
#    |
#   C7 (Cloud Storage)    -- long-term archival, must be on cloud
#
# Component requirements calibrated from Xia et al. SAC 2018 Table 3
# and Skarlat et al. SOCA 2017 experimental setup
# ============================================================================

application.nb = 1

# 8 components for the smart building app
application.components = 8

# {CPU, RAM, lambda (data flow rate), mu (processing rate)}
# C0: Sensor Gateway   - lightweight, high flow
# C1: Data Filter      - lightweight filtering
# C2: Preprocessor     - moderate compute
# C3: Thermal Analysis - heavy compute (ML inference)
# C4: Security Analysis- heavy compute (anomaly detection)
# C5: Aggregator       - moderate, merges two streams
# C6: Dashboard        - light, real-time display
# C7: Cloud Storage    - moderate, archival writes
components.requirements = \
{1,1000,800,900}, \
{1,2000,600,700}, \
{2,4000,500,600}, \
{4,8000,300,400}, \
{4,8000,300,350}, \
{2,4000,400,500}, \
{1,2000,200,300}, \
{2,4000,200,250}

# Links follow the DAG above
# {link_id, source, destination, bandwidth, max_latency}
# Bandwidth in Mbps, latency constraints in ms
# Near-sensor links need low latency (Xia et al. SAC 2018)
# Cloud-bound links tolerate higher latency
links.description = \
{0,0,1,800,50}, \
{1,1,2,600,50}, \
{2,2,3,300,100}, \
{3,2,4,300,100}, \
{4,3,5,250,100}, \
{5,4,5,250,100}, \
{6,5,6,200,50}, \
{7,6,7,100,200}

links.nb = 8

# Locality constraints (DZ):
# C0 (Sensor Gateway) MUST be on an edge node near sensors -> H9
# C7 (Cloud Storage)  MUST be on a cloud node -> H0
component.nbDZ = 2

component.DZ = \
{0, 9}, \
{7, 0}
