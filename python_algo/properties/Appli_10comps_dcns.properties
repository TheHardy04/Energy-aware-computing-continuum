# ============================================================================
# IoT Application - Intelligent Surveillance DCNS (10 components)
#
# Based on: Gupta, Dastjerdi, Ghosh, Buyya
#   "iFogSim: A Toolkit for Modeling and Simulation of Resource Management
#    Techniques in Internet of Things, Edge and Fog Computing Environments"
#    Software: Practice and Experience, vol. 47(9), pp. 1275-1296, 2017
#    Figure 10 (DCNS application model), Table 5 (sensor config)
#
# Extended with QoE-aware modules from: Mahmud, Srirama, Ramamohanarao, Buyya
#   "Quality of Experience (QoE)-aware placement of applications in
#    Fog computing environments", JPDC, vol. 132, pp. 190-203, 2019
#
# Application DAG (extended DCNS pipeline):
#
#   C0 (Camera Feed)      -- raw video capture, fixed on camera node
#    |
#   C1 (Motion Detector)  -- detects motion in video frames
#    |
#   C2 (Object Detector)  -- identifies objects in motion regions
#   / \
#  C3   C4
#  (Object    (Face
#   Tracker)   Recognizer)
#   \  /
#   C5 (Event Classifier)  -- classifies security events
#    |
#   C6 (Zone Aggregator)   -- aggregates events from this zone
#    |
#   C7 (Cross-Zone Fusion) -- fuses alerts from multiple zones
#    |
#   C8 (Alert Dashboard)   -- real-time display for operator
#    |
#   C9 (Cloud Archive)     -- long-term storage, must be on cloud
#
# This extends iFogSim's 4-module DCNS with:
#   - Face Recognizer (C4): parallel to Object Tracker, from Mahmud 2019
#   - Event Classifier (C5): replaces simple PTZ_CONTROL
#   - Zone Aggregator (C6): proxy-level aggregation
#   - Cross-Zone Fusion (C7): cloud-edge analytics
#
# Sensor config from iFogSim Table 5:
#   Camera: 5ms inter-arrival, 1000 MIPS, 20000 bytes bandwidth
# ============================================================================

application.nb = 1

# 10 components
application.components = 10

# {CPU, RAM, lambda (data flow rate), mu (processing rate)}
# C0: Camera Feed       - sensor, minimal compute, high data rate
# C1: Motion Detector   - lightweight edge processing
# C2: Object Detector   - moderate ML inference
# C3: Object Tracker    - heavy tracking algorithm
# C4: Face Recognizer   - heavy DNN inference
# C5: Event Classifier  - moderate classification
# C6: Zone Aggregator   - light aggregation
# C7: Cross-Zone Fusion - moderate multi-stream fusion
# C8: Alert Dashboard   - light real-time display
# C9: Cloud Archive     - moderate write throughput
components.requirements = \
{1,500,1000,1200}, \
{1,1000,800,1000}, \
{2,2000,600,800}, \
{2,4000,400,500}, \
{3,4000,400,450}, \
{2,2000,300,400}, \
{1,1000,200,300}, \
{2,4000,200,250}, \
{1,1000,100,200}, \
{2,4000,100,150}

# Links follow the DAG
# {link_id, source, destination, bandwidth, max_latency}
links.description = \
{0,0,1,1000,10}, \
{1,1,2,800,20}, \
{2,2,3,400,50}, \
{3,2,4,400,50}, \
{4,3,5,300,50}, \
{5,4,5,300,50}, \
{6,5,6,200,30}, \
{7,6,7,200,100}, \
{8,7,8,150,50}, \
{9,8,9,100,200}

links.nb = 10

# Locality constraints:
# C0 (Camera Feed) MUST be on a camera node -> H11 (area 1, camera 1)
# C9 (Cloud Archive) MUST be on cloud -> H0
# C6 (Zone Aggregator) MUST be on a gateway or proxy (area-level) -> H3
component.nbDZ = 3

component.DZ = \
{0, 11}, \
{9, 0}, \
{6, 3}
