# ============================================================================
# IoT Application - Smart City AR/Analytics Pipeline (11 components)
#
# Based on: Goudarzi, Shaghaghi, Wang, Buyya
#   "Performance and Security Aware Distributed Service Placement
#    in Fog Computing", arXiv:2601.01125, January 2026
#   Section V-B: DAG generation (fat=0.5, density=0.4)
#   Task requirements: CPU 0.5-100M instructions, RAM 10-1000MB
#
# Application inspired by: Natesha, Guddeti
#   "Service Placement in the Computing Continuum for Delay-Sensitive
#    IoT/IIoT Applications", JNSM, July 2025
#   AR user + traffic monitoring use case
#
# Also: Taleb, Caron, Musik
#   "A Survey on Services Placement Algorithms in Integrated
#    Cloud-Fog/Edge Computing", ACM CSUR 57(11), June 2025
#   Table 3: application patterns taxonomy
#
# Application DAG (Smart City AR + Traffic Analytics):
#
#   C0 (AR Camera)          -- edge device, captures video stream
#    |
#   C1 (Video Preprocessor) -- resize, denoise, frame selection
#    |      \
#   C2       C3
#  (Object    (Scene
#   Detection) Recognition)  -- parallel DNN inference paths
#    |      /
#   C4 (AR Renderer)        -- overlay annotations on video
#    |
#   C5 (Traffic Analyzer)   -- vehicle counting, speed estimation
#    |          \
#   C6           C7
#  (Congestion    (Incident
#   Predictor)     Detector)   -- parallel analytics branches
#    \          /
#   C8 (City Dashboard)     -- real-time city operations center
#    |
#   C9 (Historical Store)   -- time-series database for analytics
#    |
#   C10 (ML Training)       -- periodic model retraining on cloud
#
# DAG structure: wide (fat=0.5) with moderate density (0.4)
# Two diamond patterns (C1-C2/C3-C4 and C5-C6/C7-C8)
# Long pipeline tail (C8-C9-C10) to cloud
# ============================================================================

application.nb = 1

# 11 components
application.components = 11

# {CPU, RAM, lambda, mu}
# Requirements calibrated from Goudarzi et al. 2026 ranges:
# C0:  AR Camera        - sensor, minimal (1 CPU, 500MB)
# C1:  Video Preproc.   - moderate DSP (2 CPU, 2GB)
# C2:  Object Detection - heavy DNN (4 CPU, 8GB, e.g. YOLOv8)
# C3:  Scene Recognition- heavy CNN (3 CPU, 6GB)
# C4:  AR Renderer      - GPU-like, real-time overlay (2 CPU, 4GB)
# C5:  Traffic Analyzer - moderate counting (2 CPU, 4GB)
# C6:  Congestion Pred. - time-series ML (3 CPU, 4GB)
# C7:  Incident Detect. - anomaly detection (2 CPU, 4GB)
# C8:  City Dashboard   - visualization (1 CPU, 2GB)
# C9:  Historical Store - DB write (2 CPU, 8GB)
# C10: ML Training      - heavy batch (4 CPU, 16GB, cloud)
components.requirements = \
{1,500,800,1000}, \
{2,2000,600,800}, \
{4,8000,300,400}, \
{3,6000,300,350}, \
{2,4000,500,600}, \
{2,4000,400,500}, \
{3,4000,200,300}, \
{2,4000,200,250}, \
{1,2000,150,200}, \
{2,8000,100,150}, \
{4,16000,50,100}

# Links
# {link_id, source, dest, bandwidth, max_latency}
#
# Near-camera links: ultra-low latency for AR (Natesha et al.)
# Analytics links: moderate latency acceptable
# Cloud links: high latency tolerated for training
links.description = \
{0,0,1,800,10}, \
{1,1,2,500,30}, \
{2,1,3,500,30}, \
{3,2,4,400,20}, \
{4,3,4,400,20}, \
{5,4,5,300,30}, \
{6,5,6,200,50}, \
{7,5,7,200,50}, \
{8,6,8,150,50}, \
{9,7,8,150,50}, \
{10,8,9,100,100}, \
{11,9,10,80,300}

links.nb = 12

# DZ constraints:
# C0  (AR Camera)      MUST be on edge device -> H10 (downtown camera)
# C10 (ML Training)    MUST be on cloud -> H0
# C8  (City Dashboard) MUST be on city operations fog node -> H2
component.nbDZ = 3

component.DZ = \
{0, 10}, \
{10, 0}, \
{8, 2}
